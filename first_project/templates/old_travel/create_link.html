{% extends "base.html" %}
{% load static %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'tabipre/css/old_template/create_link.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">

  <h3 class="sub-title mb-3">ãƒªãƒ³ã‚¯ã®å…±æœ‰</h3>

  <form method="post">
    {% csrf_token %}

    <!-- æ¨©é™è¨­å®š -->
    <div class="mb-4">
      <label class="form-label fw-bold">æ¨©é™ã®è¨­å®š</label>
      {{ form.permission_type }}
    </div>

    <!-- æœ‰åŠ¹æœŸé™è¨­å®š -->
    <label class="form-label fw-bold">æœ‰åŠ¹æœŸé™ã®è¨­å®š</label>

    <div class="mb-3">

      <!-- ONE_MONTH -->
      <label class="d-block mt-2">
        <input type="radio"
               name="expiration_type"
               value="0"
               data-expiration-date="{{ one_month_later|date:'Y-m-d' }}"
               {% if form.initial.expiration_type == 0 %}checked{% endif %}>
        1ã‹æœˆé–“æœ‰åŠ¹ï¼š
        <span class="text-muted">ï¼ˆ{{ one_month_later|date:"Y.n.j" }} ã¾ã§ï¼‰</span>
      </label>

      <!-- AFTER_TRIP -->
      <label class="d-block mt-2">
        <input type="radio"
               name="expiration_type"
               value="1"
               data-expiration-date="{{ next_day|date:'Y-m-d' }}"
               {% if form.initial.expiration_type == 1 %}checked{% endif %}>
        æ—…è¡Œçµ‚äº†æ—¥ã®ç¿Œæ—¥ã¾ã§ï¼š
        <span class="text-muted">ï¼ˆ{{ next_day|date:"Y.n.j" }} ã¾ã§ï¼‰</span>
      </label>

      <!-- USER_INPUT -->
      <label class="d-block mt-2">
        <input type="radio"
               name="expiration_type"
               value="2"
               {% if form.initial.expiration_type == 2 %}checked{% endif %}>
        æ—¥ä»˜ã‚’æŒ‡å®šã™ã‚‹
      </label>

      <!-- æ—¥ä»˜å…¥åŠ›æ¬„ -->
      <div id="date_input_wrapper" class="mt-2" style="display:flex; gap:8px; align-items:center;">
        {{ form.expiration_date }}

        <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ -->
        <button type="button" id="open_calendar_btn" class="btn btn-outline-secondary">
          ğŸ“…
        </button>
      </div>

    </div>

    <button type="submit" class="btn btn-primary w-100 mt-3">ãƒªãƒ³ã‚¯ã‚’ç™ºè¡Œ</button>
  </form>

  <div class="mt-3 text-center">
    <a href="{% url 'app:travel_detail' template.travel_info.travel_info_id %}" class="text-secondary">
      ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    </a>
  </div>

</div>

{% if show_modal %}
    {% include "old_travel/modal/link_modal.html" %}
{% endif %}

{% endblock %}

{% block extra_js %}
<script>
  window.SHOW_MODAL = {{ show_modal|yesno:"true,false" }};
</script>

<script src="{% static 'tabipre/js/old_travel/create_link.js' %}"></script>
{% endblock %}