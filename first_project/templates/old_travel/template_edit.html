{% extends "tabipre/base.html" %}
{% load static %}

{% block extra_css %}
{% block content %}
<div class="container mt-4">

    <h2>{{ travel.travel_title }}（テンプレート編集）</h2>

    <!-- 分類一覧 -->
    {% for category in categories %}
        <div class="mb-4">
            <h5 style="color: {{ category.get_category_color_display }};">
                {{ category.category_name }}
            </h5>

            <ul class="list-group">
                {% for item in category.travelitem_set.all %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ item.item_name }}

                        <!-- 編集ボタン（鉛筆アイコン） -->
                        <a href="{% url 'app:edit_item' item.id %}" class="btn btn-sm btn-outline-secondary">
                            ✏️
                        </a>
                    </li>
                {% endfor %}
            </ul>

            <!-- 項目追加ボタン -->
            <a href="{% url 'app:add_item' category.id %}" class="btn btn-sm btn-primary mt-2">
                ＋ 項目を追加
            </a>
        </div>
    {% endfor %}

    <!-- 分類追加 -->
    <a href="{% url 'app:add_category' template.id %}" class="btn btn-success w-100 mt-4">
        ＋ 分類を追加
    </a>

    <!-- 旅行詳細画面へ戻る -->
    <a href="{% url 'app:travel_detail' travel.travel_info_id %}" class="btn btn-secondary w-100 mt-3">
        旅行詳細画面へ戻る
    </a>

</div>
{% endblock %}
