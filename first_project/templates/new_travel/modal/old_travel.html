<div class="modal fade" id="copyModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">テンプレートを選択</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        {% if templates %}
        <form method="POST" action="{% url 'app:travel_step2' %}">
          {% csrf_token %}
          <input type="hidden" name="action" value="copy">

          {% for template in templates %}
            <div class="border rounded p-3 mb-3 d-flex justify-content-between align-items-center">

              <!-- 左側：ステータス + タイトル + 日付 -->
              <label for="t{{ template.id }}" class="d-flex align-items-center w-100" style="cursor:pointer;">

                <!-- ラジオボタン -->
                <input type="radio"
                       id="t{{ template.id }}"
                       name="old_travel_id"
                       value="{{ template.travel_info.travel_info_id }}"
                       class="form-check-input me-3">

                <div>

                  <!-- ステータス表示（例：完 / 未 / 済）-->
                  <span class="badge bg-secondary me-2">
                    {% if template.status == 1 %}完
                    {% elif template.status == 2 %}未
                    {% else %}済
                    {% endif %}
                  </span>

                  <!-- タイトル -->
                  <strong>{{ template.travel_info.travel_title }}</strong><br>

                  <!-- 日付 -->
                  <small class="text-muted">
                    {% if template.travel_info.end_date %}
                      {{ template.travel_info.start_date }} ～ {{ template.travel_info.end_date }}
                    {% else %}
                      {{ template.travel_info.start_date }}
                    {% endif %}
                  </small>

                </div>
              </label>

              <!-- 右側：選択ボタン -->
              <button type="submit"
                      class="btn btn-outline-primary btn-sm ms-2"
                      onclick="document.getElementById('t{{ template.id }}').checked = true;">
                選択
              </button>

            </div>
          {% endfor %}

        </form>

        {% else %}
          <p>コピーできるテンプレートがありません。</p>
        {% endif %}

      </div>

    </div>
  </div>
</div>