{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
{{ block.super }}
{% comment %} <link rel="stylesheet" href="{% static 'tabipre/home.css' %}"> {% endcomment %}
{% endblock %}
{% block content %}
<div class="container mt-4 mb-5">

    <!-- ğŸ” ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ -->
    <form method="GET" class="d-flex mb-3">
        <input type="text" name="keyword" value="{{ keyword }}" class="form-control me-2"
               placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢">
        <button class="btn btn-primary">æ¤œç´¢</button>
    </form>

    <!-- ğŸ· äº¤é€šæ‰‹æ®µã‚¿ã‚°ï¼ˆæ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰ -->
    <div class="d-flex overflow-auto mb-3" style="white-space: nowrap;">
        {% for tag in tags %}
            <a href="?transport={{ tag.transport_type }}"
               class="badge rounded-pill bg-secondary text-white me-2 p-2">
                {{ tag.get_transport_type_display }}
            </a>
        {% endfor %}
    </div>

    <!-- ğŸ”„ ä¸¦ã³æ›¿ãˆãƒœã‚¿ãƒ³ -->
    <button class="btn btn-outline-secondary mb-3" data-bs-toggle="modal" data-bs-target="#sortModal">
        ä¸¦ã³æ›¿ãˆ
    </button>

    <!-- ğŸ”„ ä¸¦ã³æ›¿ãˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal fade" id="sortModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">ä¸¦ã³æ›¿ãˆ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

            <div class="modal-body">
                <a href="?keyword={{ keyword }}&transport={{ request.GET.transport }}&sort=title_asc"
                   class="btn btn-light w-100 mb-2">ã‚¿ã‚¤ãƒˆãƒ«æ˜‡é †</a>

                <a href="?keyword={{ keyword }}&transport={{ request.GET.transport }}&sort=title_desc"
                   class="btn btn-light w-100 mb-2">ã‚¿ã‚¤ãƒˆãƒ«é™é †</a>

                <a href="?keyword={{ keyword }}&transport={{ request.GET.transport }}&sort=date_asc"
                   class="btn btn-light w-100 mb-2">æ—¥ä»˜æ˜‡é †</a>

                <a href="?keyword={{ keyword }}&transport={{ request.GET.transport }}&sort=date_desc"
                   class="btn btn-light w-100 mb-2">æ—¥ä»˜é™é †</a>
            </div>


            </div>
        </div>
    </div>

    <!-- ğŸ“„ æ—…è¡Œä¸€è¦§ï¼ˆã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼‰ -->
    {% for t in travels %}
        <div class="card mb-3 shadow-sm">
            <div class="card-body">

                <h5 class="card-title">{{ t.travel_title }}</h5>

                <p class="card-text text-muted mb-1">
                    {{ t.start_date|date:"Y-m-d" }} ã€œ {{ t.end_date|date:"Y-m-d" }}
                </p>

                <p class="card-text">
                    å ´æ‰€ï¼š{{ t.get_location_display }}
                </p>

                <div class="d-flex gap-3">
                    <a href="{% url 'app:template_preview' %}?copy={{ t.travel_info_id }}"
                       class="btn btn-sm btn-outline-primary">
                        ã‚³ãƒ”ãƒ¼
                    </a>

                    <a href="#" class="btn btn-sm btn-outline-secondary">
                        è©³ç´°
                    </a>
                </div>

            </div>
        </div>
    {% empty %}
        <p class="text-center text-muted">æ—…è¡ŒãŒã‚ã‚Šã¾ã›ã‚“</p>
    {% endfor %}

    <!-- â­ ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="d-flex justify-content-center mt-4">
        <nav>
            <ul class="pagination">

                {% if travels.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ travels.previous_page_number }}">å‰ã¸</a>
                    </li>
                {% endif %}

                <li class="page-item disabled">
                    <span class="page-link">
                        {{ travels.number }} / {{ travels.paginator.num_pages }}
                    </span>
                </li>

                {% if travels.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ travels.next_page_number }}">æ¬¡ã¸</a>
                    </li>
                {% endif %}

            </ul>
        </nav>
    </div>

</div>



{% endblock%}
